# Layered Architecture

## Quick Summary

[PROJECT_NAME] implements [N]-tier architecture: [Layer1] â†’ [Layer2] â†’ [Layer3].

**Category**: Architecture
**Complexity**: Medium
**Prerequisites**: [LANGUAGE], [FRAMEWORK]

---

## ğŸš¨ SIZE LIMIT WARNING

**This generated guide MUST be 200-400 lines maximum.**

**When filling this template**:
- âœ… Code examples: 5-15 lines (NEVER > 20)
- âœ… ONE example per pattern
- âœ… Use file:line references, not full code
- âœ… Use tables for multiple patterns
- âŒ NO multiple examples for same pattern
- âŒ NO verbose explanations
- âŒ NO copying entire functions

**Validate line count after generation**: `wc -l [this-file]`
**If > 400 lines**: Condense immediately before continuing!

---

## Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Layer 1] ([path/])            â”‚  â† HTTP interface
â”‚  Request/Response handling      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“ calls
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Layer 2] ([path/])            â”‚  â† Business logic
â”‚  Orchestration                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“ calls
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Layer 3] ([path/])            â”‚  â† Data access
â”‚  Persistence                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â†“
        [Database]
```

---

## Layer Responsibilities

### [Layer 1] - [Name]

**Purpose**: [Brief description]

```[language]
# Source: [file:lines]
[layer1_example]
```

**Does**: Validation, routing, response formatting
**Doesn't**: Business logic, database access

---

### [Layer 2] - [Name]

**Purpose**: [Brief description]

```[language]
# Source: [file:lines]
[layer2_example]
```

**Does**: Business logic, orchestration
**Doesn't**: HTTP handling, direct DB access

---

### [Layer 3] - [Name]

**Purpose**: [Brief description]

```[language]
# Source: [file:lines]
[layer3_example]
```

**Does**: Database queries, data access
**Doesn't**: Business logic, HTTP handling

---

## Communication Rules

| âœ… Allowed | âŒ Not Allowed |
|-----------|---------------|
| Layer1 â†’ Layer2 â†’ Layer3 | Skip layers |
| Pass data via models/DTOs | Share state |
| Async/await throughout | Blocking calls |

---

## Error Flow

```
[Layer3 Error]
    â†“ raise
[Layer2 Transform]
    â†“ raise
[Layer1 HTTP Response]
```

**Example**:
```[language]
# Source: [file:lines]
[error_flow_example]
```

---

## Testing Strategy

| Layer | Test Type | Mock |
|-------|-----------|------|
| [Layer1] | Unit | Layer2 |
| [Layer2] | Unit | Layer3 |
| [Layer3] | Unit | Database |
| All | Integration | Nothing |

---

## References

- **[Layer1]**: `[path/]`
- **[Layer2]**: `[path/]`
- **[Layer3]**: `[path/]`

---
